<idea-plugin url="https://github.com/lowkeyfish/sonar-intellij-plugin">
    <id>com.yujunyang.intellij.plugin.sonar</id>
    <name>SonarAnalyzer</name>
    <vendor email="hnyujunyang@163.com" url="https://github.com/lowkeyfish">Yu Junyang</vendor>

    <description>
        <![CDATA[
        Sonar Intellij plugin底层使用SonarScanner执行代码检查，直接在Intellij IDEA中对Java项目进行Sonar代码检查和查看检测结果。
        <br/><br/>
        <p>
        特点：
        <ul>
            <li>代码问题按Bugs、漏洞、异味分类展示</li>
            <li>检测结果直接在Intellij IDEA中查看，不需要再打开SonarQube</li>
        </ul>
        </p>
        ]]>
    </description>

    <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
         on how to target different products -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.java</depends>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.yujunyang.intellij.plugin.sonar.config.WorkspaceSettings"/>
        <projectService serviceImplementation="com.yujunyang.intellij.plugin.sonar.config.ProjectSettings"/>
        <toolWindow
                icon="PluginIcons.LOGO_13X13"
                factoryClass="com.yujunyang.intellij.plugin.sonar.extensions.ToolWindowFactoryImpl"
                id="SonarAnalyzer"
                anchor="bottom"
        />
        <projectService serviceImplementation="com.yujunyang.intellij.plugin.sonar.service.ProblemCacheService"/>
        <externalAnnotator language="JAVA"
                           implementationClass="com.yujunyang.intellij.plugin.sonar.extensions.SonarIssueExternalAnnotator"/>
        <externalAnnotator language="XML"
                           implementationClass="com.yujunyang.intellij.plugin.sonar.extensions.SonarIssueExternalAnnotator"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="com.yujunyang.intellij.plugin.sonar.extensions.SonarIssueLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="XML"
                                        implementationClass="com.yujunyang.intellij.plugin.sonar.extensions.SonarIssueLineMarkerProvider"/>
        <applicationConfigurable parentId="tools" id="com.yujunyang.intellij.plugin.sonar.extensions.ApplicationSettingsConfigurable"
                instance="com.yujunyang.intellij.plugin.sonar.extensions.ApplicationSettingsConfigurable"/>
        <projectConfigurable parentId="com.yujunyang.intellij.plugin.sonar.extensions.ApplicationSettingsConfigurable"
                instance="com.yujunyang.intellij.plugin.sonar.extensions.ProjectSettingsConfigurable"
                             nonDefaultProject="true"
        />
    </extensions>

    <actions>
        <group id="SonarAnalyzer.AnalyzeMenu" text="SonarAnalyzer" popup="true">
            <add-to-group anchor="last" group-id="AnalyzeMenu"/>
            <add-to-group anchor="after" group-id="EditorPopupMenu" relative-to-action="AnalyzeMenu"/>
            <add-to-group anchor="after" group-id="ProjectViewPopupMenu" relative-to-action="AnalyzeMenu"/>
            <action id="SonarAnalyzer.ProjectFilesNotIncludingTestsAction"
                    class="com.yujunyang.intellij.plugin.sonar.actions.AnalyzeProjectFilesNotIncludingTests"
                    icon="PluginIcons.ANALYZE_PROJECT_FILES_NOT_INCLUDING_TESTS_ICON">
            </action>
        </group>

        <group id="SonarAnalyzer.ToolBarActions.left" text="SonarAnalyzer Actions" popup="true">
            <action id="SonarAnalyzer.Start"
                    class="com.yujunyang.intellij.plugin.sonar.actions.AnalyzeProjectFilesNotIncludingTests"
                    icon="PluginIcons.ANALYZE_EXECUTE">
            </action>

            <separator/>
            <action id="SonarAnalyzer.Setting"
                    class="com.yujunyang.intellij.plugin.sonar.actions.ShowSettingDialogAction"
                    icon="PluginIcons.PLUGIN_SETTING">
            </action>
            <action id="SonarAnalyzer.Setting.AutoScrollToSource"
                    class="com.yujunyang.intellij.plugin.sonar.actions.AutoScrollToSourceAction"
                    icon="PluginIcons.PLUGIN_AUTO_SCROLL_TO_SOURCE">
            </action>
            <separator/>
            <action id="SonarAnalyzer.Cancel"
                    class="com.yujunyang.intellij.plugin.sonar.actions.ClearAndCloseToolWindowAnalyzeAction"
                    icon="PluginIcons.ANALYZE_CLEAR">
            </action>
            <action id="SonarAnalyzer.Help"
                    class="com.yujunyang.intellij.plugin.sonar.actions.ShowHelpAction"
                    icon="PluginIcons.PLUGIN_HELP">
            </action>
            <action id="SonarAnalyzer.Test"
                    class="com.yujunyang.intellij.plugin.sonar.actions.TestAction"
                    text="测试"
                    description="测试"
                    icon="PluginIcons.SMILE">
            </action>
        </group>
    </actions>
</idea-plugin>